{% extends 'base.html' %}

{% block title %}My Wishlist - SmartStore{% endblock %}

{% block content %}
<div class="row mb-4 align-items-center">
    <div class="col-md-6">
        <h2 class="fw-bold"><i class="fas fa-heart text-danger"></i> My Wishlist</h2>
    </div>
    <div class="col-md-6 text-md-end">
        <a href="{{ url_for('product.list_products') }}" class="btn btn-outline-primary rounded-pill">
            <i class="fas fa-arrow-left me-2"></i> Continue Shopping
        </a>
    </div>
</div>

{% if products %}
<div class="row g-4">
    {% for product in products %}
    <div class="col-md-3 col-sm-6">
        <div class="card h-100 border-0 product-card">
            <div class="position-relative overflow-hidden rounded-top">
                <img src="{{ product.image_url or url_for('static', filename='images/placeholder.jpg') }}"
                    class="card-img-top product-image" alt="{{ product.name }}">

                <form action="{{ url_for('wishlist.remove_from_wishlist', product_id=product.id) }}" method="POST"
                    class="position-absolute top-0 end-0 m-2">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-light btn-sm rounded-circle shadow-sm text-danger"
                        title="Remove from Wishlist">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </form>
            </div>

            <div class="card-body d-flex flex-column">
                <div class="mb-2">
                    <span class="badge bg-light text-primary border border-primary-subtle rounded-pill">{{
                        product.category_name }}</span>
                </div>
                <h6 class="card-title text-dark fw-bold mb-1">{{ product.name }}</h6>
                <p class="card-text text-muted small flex-grow-1">
                    {{ product.description[:60] }}{% if product.description|length > 60 %}...{% endif %}
                </p>
                <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
                    <h5 class="text-primary mb-0 fw-bold">â‚¹{{ "%.2f"|format(product.price) }}</h5>
                    <a href="{{ url_for('product.product_detail', product_id=product.id) }}"
                        class="btn btn-sm btn-light text-primary rounded-circle shadow-sm"
                        style="width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-5">
    <div class="mb-3 text-muted">
        <i class="far fa-heart fa-4x opacity-50"></i>
    </div>
    <h4 class="fw-bold">Your Wishlist is Empty</h4>
    <p class="text-muted">Save items you love to find them easily later.</p>
    <a href="{{ url_for('product.list_products') }}" class="btn btn-primary rounded-pill mt-3">
        Explore Products
    </a>
</div>
{% endif %}
{% endblock %}